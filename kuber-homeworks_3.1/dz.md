# 1  Нагрузка приложений
| Компонент | Реплик | CPU / реплика | RAM / реплика | **Итого CPU** | **Итого RAM** |
|---|---:|---:|---:|---:|---:|
| База данных (HA) | 3 | 1 vCPU | 4 GiB | **3** | **12 GiB** |
| Кэш (HA) | 3 | 1 vCPU | 4 GiB | **3** | **12 GiB** |
| Frontend | 5 | 0.2 vCPU | 50 MiB | **1** | **0.25 GiB** |
| Backend | 10 | 1 vCPU | 600 MiB | **10** | **6 GiB** |
| **Итого нагрузка** |  |  |  | **17 vCPU** | **30.25 GiB** |

# 2 Производственный запас

Добавляем +20% на пики:
CPU: 17 × 1.2 = 20.4 vCPU
RAM: 30.25 × 1.2 = 36.3 GiB

# 3 Запас на одну ноду

Выбор профиля worker-нод
4 × (8 vCPU, 16 GiB RAM)
После отказа 1 ноды остаётся:
CPU: 3 × 7 = 21 vCPU ≥ 20.4 vCPU ✅
RAM: 3 × 14 = 42 GiB ≥ 36.3 GiB ✅

# 4 Control plane

Для HA control-plane: 3 ноды.
Каждая: 2 vCPU, 4 GiB RAM, 20–40 GiB SSD

# 5 Итог

Нагрузка приложений: 17 vCPU, 30.25 GiB RAM
С учётом +20%: 20.4 vCPU, 36.3 GiB RAM
Кластер:
Control-plane: 3 × (2 vCPU, 4 GiB RAM)
Workers: 4 × (8 vCPU, 16 GiB RAM) (+резервы 1 vCPU/2 GiB на ноду)
Отказ 1 worker: остаётся 21 vCPU и 42 GiB RAM → достаточно ✅
Хранилище: БД 3×100Gi; кэш 3×10–20Gi.